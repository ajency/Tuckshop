var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._,Controller=function(){function t(){return n.__widgetId?{widgetId:n.__widgetId,name:n.__controllerPath}:n.__controllerPath}var e=[],n=this;this.__iamalloy=!0,_.extend(this,Backbone.Events,{__views:{},__proxyProperties:{},setParent:function(t){var n=e.length;if(n){this.parent=t.__iamalloy?t.parent:t;for(var i=0;n>i;i++)e[i].__iamalloy?e[i].setParent(this.parent):this.parent.add(e[i])}},addTopLevelView:function(t){e.push(t)},addProxyProperty:function(t,e){this.__proxyProperties[t]=e},removeProxyProperty:function(t){delete this.__proxyProperties[t]},getTopLevelViews:function(){return e},getView:function(t){return"undefined"==typeof t||null===t?e[0]:this.__views[t]},removeView:function(t){delete this[t],delete this.__views[t]},getProxyProperty:function(t){return this.__proxyProperties[t]},getViews:function(){return this.__views},destroy:function(){},getViewEx:function(t){var e=t.recurse||!1;if(e){var n=this.getView();return n?n.__iamalloy?n.getViewEx({recurse:!0}):n:null}return this.getView()},getProxyPropertyEx:function(t,e){var n=e.recurse||!1;if(n){var i=this.getProxyProperty(t);return i?i.__iamalloy?i.getProxyProperty(t,{recurse:!0}):i:null}return this.getView(t)},createStyle:function(e){return Alloy.createStyle(t(),e)},UI:{create:function(e,n){return Alloy.UI.create(t(),e,n)}},addClass:function(e,n,i){return Alloy.addClass(t(),e,n,i)},removeClass:function(e,n,i){return Alloy.removeClass(t(),e,n,i)},resetClass:function(e,n,i){return Alloy.resetClass(t(),e,n,i)},updateViews:function(t){var e=this.getViews();return _.isObject(t)&&_.each(_.keys(t),function(n){var i=e[n.substring(1)];0===n.indexOf("#")&&"#"!==n&&_.isObject(i)&&"function"==typeof i.applyProperties&&i.applyProperties(t[n])}),this}})};module.exports=Controller;