function registerForPush(){Ti.Network.registerForPushNotifications({success:deviceTokenSuccess,error:deviceTokenError,callback:receivePush}),Ti.App.iOS.removeEventListener("usernotificationsettings",registerForPush)}function deviceTokenSuccess(t){deviceToken=t.deviceToken}function deviceTokenError(){alert("Failed to register for push notifications!"),Ti.App.fireEvent("pushNotificationRegisterError")}function receivePush(t){if(t.data.hasOwnProperty("custom_property"))localStorage.getPendingItems()&&(finalArray=localStorage.getPendingItems()),finalArray.unshift(t.data.message),Ti.App.Properties.removeProperty("pendingItems"),localStorage.savePendingItems(finalArray);else{Alloy.Globals.pushNotificationReceived=!0;var e=require("/fetchCloudProducts"),n=dbOperations.getCount();1===n?e.fetchCategories("home"):n>1&&e.fetchCategories("alloy");var i=Titanium.UI.createAlertDialog({title:"Notification",message:t.data.alert,buttonNames:["OK"],cancel:0});i.show()}}var Alloy=require("alloy"),_=Alloy._,Backbone=Alloy.Backbone,Cloud=require("ti.cloud");Cloud.debug=!0;var finalArray=[],allProductsArray=[],localPath,createdDateValue,localStorage=require("/localStorage"),deviceToken=null;Alloy.Globals.pushNotificationReceived=!1;var dbOperations=require("/dbOperations");dbOperations.createDB(),dbOperations.addColumn();var CloudPush;console.log("In iphone"),Titanium.UI.iPhone.setAppBadge(null),parseInt(Ti.Platform.version.split(".")[0])>=8?(Ti.App.iOS.addEventListener("usernotificationsettings",registerForPush),Ti.App.iOS.registerUserNotificationSettings({types:[Ti.App.iOS.USER_NOTIFICATION_TYPE_ALERT,Ti.App.iOS.USER_NOTIFICATION_TYPE_SOUND,Ti.App.iOS.USER_NOTIFICATION_TYPE_BADGE]})):Ti.Network.registerForPushNotifications({types:[Ti.Network.NOTIFICATION_TYPE_BADGE,Ti.Network.NOTIFICATION_TYPE_ALERT,Ti.Network.NOTIFICATION_TYPE_SOUND],success:deviceTokenSuccess,error:deviceTokenError,callback:receivePush}),Alloy.Globals.categoryResponse=[],Alloy.Globals.userResponse=[],Alloy.Globals.navigatedView="Home",Alloy.Globals.successOnRefresh,Alloy.Globals.navigatePrevious,Alloy.Globals.toggleLeft,Alloy.Globals.midContainerReference,Alloy.Globals.navigatedFromAllProducts=!1,Alloy.Globals.autoLogin=!1,Alloy.Globals.logoutInterval,Alloy.Globals.forceLogout=function(){Alloy.Globals.logoutInterval=setTimeout(function(){Cloud.Users.logout(function(t){t.success?(dbOperations.updateSessionId(localStorage.getLastLoggedInUserId()),dbOperations.offlineLoginStatus(localStorage.getLastLoggedInUserId()),Alloy.Globals.autoLogin=!1,Alloy.createController("multiUser",{}).getView().open()):Alloy.createController("index",{}).getView().open()})},25e4)},Alloy.createController("index");