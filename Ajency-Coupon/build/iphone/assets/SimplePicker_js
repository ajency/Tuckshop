var PickerPopup=function(e,t){var n=require("platformSupport"),i=null,r=t,o="",a=-1,s=null,u=null,l=null,d=null;i=Ti.UI.createWindow({backgroundColor:"#FFF",layout:"vertical"}),u=Ti.UI.createButton({title:"Cancel",height:25,top:2,left:20,style:Ti.UI.iPhone.SystemButtonStyle.BORDERED}),l=Ti.UI.createButton({title:"Done",height:25,top:2,right:20,style:Ti.UI.iPhone.SystemButtonStyle.BORDERED});var c=Ti.UI.createButton({systemButton:Ti.UI.iPhone.SystemButton.FLEXIBLE_SPACE});d=Ti.UI.iOS.createToolbar({items:[u,c,l],backgroundColor:"#777",top:0,borderTop:!1,borderBottom:!0}),null!=Alloy.CFG.colorCode&&(d.backgroundColor=Alloy.CFG.colorCode,c.backgroundColor=Alloy.CFG.colorCode),n.isiOS7Plus()&&(d.top=20),i.add(d);for(var h=[],f=0;f<r.length;f++)h.push({title:r[f]});var m=Ti.UI.createView({left:0,right:0,bottom:0,height:Ti.UI.FILL});return s=Ti.UI.createTableView({data:h,borderWidth:1,borderColor:"#000",borderRadius:5,top:5,left:5,right:5,bottom:5,allowSelection:!1,selectionStyle:Titanium.UI.iPhone.TableViewCellSelectionStyle.NONE}),s.addEventListener("click",function(e){var t=s.data[0].rows;for(f=0;f<t.length;f++)t[f].backgroundColor="white";rowData=e.rowData,rowData.backgroundColor=Alloy.CFG.colorCode}),s.addEventListener("click",function(e){i.xsetValue(r[e.index])}),i.add(m),m.add(s),l.addEventListener("click",function(){i.fireEvent("done",{value:o}),i.close()}),u.addEventListener("click",function(){i.close()}),i.xsetValue=function(e){a>-1&&s.deselectRow(a);for(var t=0;t<r.length;t++)if(r[t]==e){a=t,s.selectRow(a),s.scrollToIndex(a);break}o=e},i};exports.SimplePicker=function(e){var t=null,n=null,i=[],r="",o=[],a="",s=null,u=null,l={};for(var d in e)"values"!=d?"title"!=d?l[d]=e[d]:a=e[d]:i=e[d];i.length>0&&(r=i[0]);for(var c=0;c<i.length;c++)o.push(Ti.UI.createPickerRow({title:i[c]}));if("android"==Ti.Platform.osname)"undefined"!=typeof l.backgroundColor&&delete l.backgroundColor,Ti.API.debug("[SimplePicker] newparams: "+JSON.stringify(l)),t=Ti.UI.createPicker(l),t.addEventListener("change",function(e){r=e.selectedValue[0],t.fireEvent("TUchange",{value:r})}),t.add(o);else{"undefined"==typeof l.height&&(l.height=35),"undefined"==typeof l.borderColor&&(l.borderColor="#686868"),"undefined"==typeof l.borderRadius&&(l.borderRadius=5),"undefined"==typeof l.backgroundColor&&(l.backgroundColor="#fff"),"undefined"==typeof l.font&&(l.font={fontSize:16,fontWeight:"bold"}),"undefined"==typeof l.color&&(l.color=Alloy.CFG.colorCode),null!=Alloy.CFG.colorCode&&(l.borderColor=Alloy.CFG.colorCode),l.text=r,t=Ti.UI.createView(l);var h={left:10,top:8,color:l.color,font:l.font,text:r};n=Ti.UI.createLabel(h);var f=Ti.UI.create2DMatrix();f=f.rotate(90),u=Ti.UI.createButton({right:5,width:20,height:20,image:"/images/red/dropdownButton.png",backgroundColor:"null",backgroundImage:"null"}),null!=Alloy.CFG.theme&&("blue"==Alloy.CFG.theme?u.image="/images/blue/dropdownButton.png":"green"==Alloy.CFG.theme?u.image="/images/green/dropdownButton.png":"red"==Alloy.CFG.theme&&(u.image="/images/red/dropdownButton.png")),t.add(n),t.add(u),t.addEventListener("click",function(){s=new PickerPopup(a,i),s.addEventListener("done",function(e){e.value!=r&&(r=e.value,n.text=r,t.fireEvent("TUchange",e))}),s.xsetValue(r),s.open({modal:!0,navBarHidden:!0})})}return t.xgetValue=function(){return r},t.xsetValue=function(e){for(var o=0;o<i.length;o++)i[o]==e&&(r=e,"android"==Ti.Platform.osname?t.setSelectedRow(0,o,!1):n.text=r)},t};